## Домашнее задание 2

### Сетка дедлайнов:

| обычное название | дата             | штраф
| ---------------  | ---------------- | ----------------------------------------------------- |
|  **мягкий**      | 20 ноября  23:59 | до этого момента получаем полный балл, после -- 0.5   |
|  **жесткий**     | 04 декабря 23:59 | с этого момента, увы, не имеет смысла сдавать решения |

### 1. Удваиватель (2 балла)

Вам предлагается написать команду, копирующую содержимое файла `data` в конец
этого же файла.

_Примечания_:
 * решение на полный балл не должно использовать временные файлы;
 * файл может содержать бинарные данные;
 * проверьте, что если изначальный размер файла был n байт, то размер результирующего файла -- 2 * n байт;
 * проверьте свое решение на больших (> 10 MB) файлах (1 балл);

### 2. Cron (3 балла)

Вам необходимо написать скрипт, после запуска которого, каждый день со вторника 
по пятницу в 18 часов будет отправляться широковещательное сообщение (т.е. всем
пользователям системы) с напоминанием о том, что мягкий дедлайн по домашнему 
задания наступает в пятницу, 23:59.

**Примечания:**
* В задании необходимо использовать `crontab(1)`.

### 3. getops (2 балла)

Написать скрипт, вызываемый следующим образом:

    ./task3.sh -i src_dir -o dst_dir

Скрипт должен копировать все исполняемые файлы из `src_dir` (с учетом 
подкаталогов) в `dst_dir`.

Ключи могут задаваться в любом порядке; если хотя бы один из них не указан, должна быть выдана ошибка.

Используйте `getops(1)`.

### 4. СКС (5 баллов)

Вам предлагается написать межсетевой экран для высоконагруженного сервера.

Конечно, в виде shell-скрипта.

Система контроля сервера (СКС) будет запускать ваш скрипт и передавать ему
в качестве параметра файла, назовём его `blacklist`, на каждой строчке которого указан заблокированный домен.

На стандартный ввод скрипта СКС будет посылать адреса страниц, которые хочет 
посетить пользователь.

В ответ на каждый запрос необходимо вывести `ALLOW`, если доступ к данному сайту разрешен, 
и `DENY` в противном случае.

**(!) Важно:** домен должен блокироваться вместе со всеми своими поддоменами.

Пример файла:

    nescafe.ru
    www.rutracker.org

Пример ввода/вывода:

    http://rutracker.org/cnc5                               ALLOW
    http://www.rutracker.org/cnc5                           DENY
    http://ivan:123@yyy.photography:2218/cnc5/1/2/3.html    ALLOW
    https://v.www.rutracker.org/cnc5                        DENY
    https://yyy.org/cnc5                                    ALLOW
    http://ivan:123@yyy.photography:2218/cnc5               ALLOW

Гарантируется, что в адресе страницы будут только символы из
латинского алфавита (оба регистра), цифры, дефисы, точка и косая черта.

Формат URL можно найти [здесь](https://ru.wikipedia.org/wiki/URL#Структура_URL).

Здесь могут помочь изученные конструкции, например, `if` и `while`, а также утилита `grep`.

## Задания, в которых обязательно использовать sed

### 1. ifconfig (6 баллов)

Утилита `ifconfig` выводит названия интерфейсов и их параметры.

Замените IP-адреса (inet) всех интерфейсов на `xxx.x.x.x`,
где каждый `x` соответствует **одной цифре** в IP-адресе.

Также нужно разделить интерфейсы строкой из дефисов.

### 2. Телефонная книжка (5 баллов)

Кто-то и зачем-то оставил Вам телефонную книжку в виде csv файла следующего
формата: Имя, Фамилия, Телефон.

Преобразовать в текстовый файл формата html, который можно было бы
просматривать в браузере.

Только с помощью `sed` (**_см [sed_03.sh](./src/sed_03.sh)_**)!

Пример входного файла:

    Имя,Фамилия,Телефон
    Петр,Иванов,1234567
    Иван,Петров,7654321


### 3. IP (6 баллов)

Вычислите недоброжелателей по IP.

Файл `ips.txt` (_прим.: в `src` его нет_) содержит их IP-адреса по одному на строку.

Нужно вывести в `stdout` список городов, в которых находятся недоброжелатели.

Примечания:
* Адресов может быть очень много, поэтому работу с сетью необходимо распараллелить.
* Для обработки данных можно использовать только `sed`.
* Для запросов по сети и распараллеливания ограничений нет.
* Учтите, что некоторые способы распараллеливания могут привести к перемешиванию данных при выводе, что недопустимо.
* Проверьте, что по крайней мере для вашего IP скрипт выдает правильный город.
